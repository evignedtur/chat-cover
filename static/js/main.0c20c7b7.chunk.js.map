{"version":3,"sources":["util.ts","CurrentlyPlaying.tsx","admin/admin.tsx","admin/index.ts","callback.tsx","App.tsx","serviceWorker.ts","index.tsx"],"names":["loadConfig","localStorage","getItem","setItem","JSON","stringify","currentlyPlayingPrefix","includeCurrentlyPlaying","color1","color2","nickname","server","spotifyToken","parse","saveConfig","config","CurrentlyPlaying","props","useState","is_playing","service","setService","token","setToken","useEffect","Axios","get","then","result","data","SpotifyToken","updateSong","item","name","GetSpotifyCurrentlyPlaying","a","headers","Authorization","callback","delay","deps","savedCallback","useRef","current","id","setInterval","clearInterval","useInterval","catch","error","console","div","initial","translateY","animate","exit","className","style","width","artists","map","artist","join","Admin","REDIRECT_URI","window","location","protocol","host","pathname","useForm","register","handleSubmit","setConfig","href","encodeURIComponent","toLowerCase","onSubmit","fixedData","htmlFor","type","defaultValue","ref","disabled","saveSpotifyData","ACCESS_TOKEN","EXPIRES_IN","TOKEN_TYPE","Callback","to","getHashValue","key","matches","hash","match","RegExp","Out","useParams","setWidth","offsetWidth","SpotifyTokenHandler","App","basename","path","exact","children","Boolean","hostname","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.0c20c7b7.chunk.js","sourcesContent":["import {useEffect, useRef} from 'react';\r\nimport {Config} from './models';\r\n\r\nexport const useInterval = (callback: any, delay: number, deps?: any) => {\r\n\tconst savedCallback = useRef(callback);\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tsavedCallback.current = callback;\r\n\t\t},\r\n\t\t[callback]\r\n\t);\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\tfunction tick() {\r\n\t\t\t\tsavedCallback!.current();\r\n\t\t\t}\r\n\t\t\tif (delay !== null) {\r\n\t\t\t\tlet id = setInterval(tick, delay);\r\n\t\t\t\treturn () => clearInterval(id);\r\n\t\t\t}\r\n\t\t},\r\n\t\t[delay, deps]\r\n\t);\r\n};\r\n\r\nexport const loadConfig = () => {\r\n\tif (!localStorage.getItem('CONFIG')) {\r\n\t\tconst config: Config = {\r\n\t\t\tcurrentlyPlayingPrefix: 'Currently playing',\r\n\t\t\tincludeCurrentlyPlaying: false,\r\n\t\t\tcolor1: 'rgb(155,31,31)',\r\n\t\t\tcolor2: 'rgb(194,76,76)',\r\n\t\t\tnickname: 'Nickname',\r\n\t\t\tserver: 'Server',\r\n\t\t\tspotifyToken: ''\r\n\t\t};\r\n\t\tlocalStorage.setItem('CONFIG', JSON.stringify(config));\r\n\t}\r\n\treturn JSON.parse(localStorage.getItem('CONFIG')!) as Config;\r\n};\r\n\r\nexport const saveConfig = (config: Config) => {\r\n\tlocalStorage.setItem('CONFIG', JSON.stringify(config));\r\n};\r\n","import React, { useEffect, useState } from 'react';\r\nimport ScrollText from 'react-scroll-text';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport { useInterval } from './util';\r\nimport { CurrentlyPlayingProps, SpotifyCurrentlyPlayingResult } from './models';\r\nimport Axios, { AxiosResponse } from 'axios';\r\n\r\nconst CurrentlyPlaying: React.FC<CurrentlyPlayingProps> = props => {\r\n\tconst [service, setService] = useState<SpotifyCurrentlyPlayingResult>({\r\n\t\tis_playing: false\r\n\t});\r\n\tconst [token, setToken] = useState('');\r\n\r\n\tuseEffect(() => {\r\n\t\tif (!token) {\r\n\t\t\tAxios.get(`https://evig-nedtur.herokuapp.com/session/${props.token}`).then(result => {\r\n\t\t\t\tsetToken(result.data.SpotifyToken);\r\n\t\t\t});\r\n\t\t}\r\n\t}, [props.token, token]);\r\n\r\n\tconst updateSong = (result: AxiosResponse<SpotifyCurrentlyPlayingResult>) => {\r\n\t\treturn (\r\n\t\t\tservice &&\r\n\t\t\t((service.item && result.data && result.data.item && service.item.name !== result.data.item.name) ||\r\n\t\t\t\tservice.is_playing !== result.data.is_playing)\r\n\t\t);\r\n\t};\r\n\r\n\tconst GetSpotifyCurrentlyPlaying = async () => {\r\n\t\tconst result = await Axios.get<SpotifyCurrentlyPlayingResult>('https://api.spotify.com/v1/me/player/currently-playing', {\r\n\t\t\theaders: { Authorization: `Bearer ${token}` }\r\n\t\t});\r\n\t\tif (updateSong(result)) {\r\n\t\t\tsetService(result.data);\r\n\t\t}\r\n\t};\r\n\r\n\tuseInterval(() => {\r\n\t\tGetSpotifyCurrentlyPlaying().catch(error => {\r\n\t\t\tconsole.error(error);\r\n\t\t});\r\n\t}, 5000);\r\n\r\n\treturn (\r\n\t\t<AnimatePresence>\r\n\t\t\t{service && service.is_playing && (\r\n\t\t\t\t<motion.div\r\n\t\t\t\t\tinitial={{ translateY: '-100%' }}\r\n\t\t\t\t\tanimate={{ translateY: '0%' }}\r\n\t\t\t\t\texit={{ translateY: '-100%' }}\r\n\t\t\t\t\tclassName=\"currently-playing\"\r\n\t\t\t\t\tstyle={{ width: `calc((100% - ${props.width}px) - 100px)` }}\r\n\t\t\t\t>\r\n\t\t\t\t\t<ScrollText>\r\n\t\t\t\t\t\t{service.is_playing &&\r\n\t\t\t\t\t\t\tservice.item &&\r\n\t\t\t\t\t\t\tservice.item.name &&\r\n\t\t\t\t\t\t\tservice.item.artists &&\r\n\t\t\t\t\t\t\t`Curently playing: ${service.item.artists.map(artist => artist.name).join(', ')} - ${service.item.name}`}\r\n\t\t\t\t\t</ScrollText>\r\n\t\t\t\t</motion.div>\r\n\t\t\t)}\r\n\t\t</AnimatePresence>\r\n\t);\r\n};\r\n\r\nexport const deleteSpotifyData = () => {\r\n\tlocalStorage.removeItem('ACCESS_TOKEN');\r\n\tlocalStorage.removeItem('EXPIRES_IN');\r\n\tlocalStorage.removeItem('TOKEN_TYPE');\r\n};\r\n\r\nexport default CurrentlyPlaying;\r\n","import React, { useState } from 'react';\r\nimport useForm from 'react-hook-form';\r\nimport { loadConfig, saveConfig } from '../util';\r\n\r\nconst Admin: React.FC = () => {\r\n\tconst REDIRECT_URI = `${window.location.protocol + '//' + window.location.host + window.location.pathname}#/spotify-token`;\r\n\tconst { register, handleSubmit } = useForm();\r\n\tconst [config, setConfig] = useState(loadConfig());\r\n\r\n\tconst onSubmit = (data: any) => {\r\n\t\tconst includeCurrentlyPlaying = data.includeCurrentlyPlaying === 'true';\r\n\t\tconst fixedData = { ...data, includeCurrentlyPlaying };\r\n\t\tsetConfig(fixedData);\r\n\t\tsaveConfig(fixedData);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div className=\"wrapper\">\r\n\t\t\t<div className=\"sidebar\">\r\n\t\t\t\t<div className=\"logo\" />\r\n\t\t\t\t<div className=\"sidebar-background\" />\r\n\t\t\t\t<nav>\r\n\t\t\t\t\t{!loadConfig().spotifyToken && (\r\n\t\t\t\t\t\t<a href={`https://evig-nedtur.herokuapp.com/login?returnurl=${encodeURIComponent(REDIRECT_URI)}`} className=\"button spotify\">\r\n\t\t\t\t\t\t\tLogin med Spotify\r\n\t\t\t\t\t\t</a>\r\n\t\t\t\t\t)}\r\n\t\t\t\t\t{config && config.server && config.nickname && (\r\n\t\t\t\t\t\t<a href={`#/${config!.server.toLowerCase()}/${config.nickname.toLowerCase()}/${config.spotifyToken}`} className=\"button\">\r\n\t\t\t\t\t\t\tGå til overlay\r\n\t\t\t\t\t\t</a>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</nav>\r\n\t\t\t</div>\r\n\t\t\t<div className=\"container\">\r\n\t\t\t\t<div className=\"card\">\r\n\t\t\t\t\t<div className=\"card-header\">Config</div>\r\n\t\t\t\t\t<div className=\"card-content\">\r\n\t\t\t\t\t\t<form onSubmit={handleSubmit(onSubmit)}>\r\n\t\t\t\t\t\t\t<div className=\"card-group\">\r\n\t\t\t\t\t\t\t\t<div className=\"formgroup\">\r\n\t\t\t\t\t\t\t\t\t<label htmlFor=\"server\">Server</label>\r\n\t\t\t\t\t\t\t\t\t<input type=\"text\" defaultValue={config.server} name=\"server\" id=\"server\" ref={register} />\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div className=\"formgroup\">\r\n\t\t\t\t\t\t\t\t\t<label htmlFor=\"nickname\">Nickname</label>\r\n\t\t\t\t\t\t\t\t\t<input type=\"text\" defaultValue={config.nickname} name=\"nickname\" id=\"nickname\" ref={register} />\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className=\"card-group\">\r\n\t\t\t\t\t\t\t\t{config.spotifyToken && (\r\n\t\t\t\t\t\t\t\t\t<div className=\"formgroup\">\r\n\t\t\t\t\t\t\t\t\t\t<label htmlFor=\"spotifyToken\">Spotify token</label>\r\n\t\t\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\t\t\t\t\tdefaultValue={config.spotifyToken}\r\n\t\t\t\t\t\t\t\t\t\t\tname=\"spotifyToken\"\r\n\t\t\t\t\t\t\t\t\t\t\tid=\"spotifyToken\"\r\n\t\t\t\t\t\t\t\t\t\t\tref={register}\r\n\t\t\t\t\t\t\t\t\t\t\tdisabled={true}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<button className=\"green\" type=\"submit\">\r\n\t\t\t\t\t\t\t\tLagre\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t</form>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Admin;\r\n","import Admin from './admin';\r\n\r\nexport default Admin;\r\n","import React from 'react';\r\nimport { Redirect } from 'react-router-dom';\r\n\r\ninterface Callback {\r\n\tACCESS_TOKEN: string | null;\r\n\tEXPIRES_IN: string | null;\r\n\tTOKEN_TYPE: string | null;\r\n}\r\n\r\nconst Callback: React.FC<Callback> = props => {\r\n\tsaveSpotifyData(props.ACCESS_TOKEN, props.EXPIRES_IN, props.TOKEN_TYPE);\r\n\treturn <Redirect to=\"/admin\" />;\r\n};\r\n\r\nconst saveSpotifyData = (ACCESS_TOKEN: string | null, EXPIRES_IN: string | null, TOKEN_TYPE: string | null) => {\r\n\tif (ACCESS_TOKEN) {\r\n\t\tlocalStorage.setItem('ACCESS_TOKEN', ACCESS_TOKEN);\r\n\t}\r\n\tif (EXPIRES_IN) {\r\n\t\tlocalStorage.setItem('EXPIRES_IN', EXPIRES_IN);\r\n\t}\r\n\tif (TOKEN_TYPE) {\r\n\t\tlocalStorage.setItem('TOKEN_TYPE', TOKEN_TYPE);\r\n\t}\r\n};\r\n\r\nexport default Callback;\r\n","import React, { useEffect, useRef, useState } from 'react';\nimport './App.css';\nimport { Switch, Route, useParams, HashRouter, Redirect } from 'react-router-dom';\nimport CurrentlyPlaying from './CurrentlyPlaying';\nimport Admin from './admin';\nimport Callback from './callback';\nimport { loadConfig, saveConfig } from './util';\n\nconst App: React.FC = () => {\n\tconst ACCESS_TOKEN = getHashValue('access_token');\n\tconst EXPIRES_IN = getHashValue('expires_in');\n\tconst TOKEN_TYPE = getHashValue('token_type');\n\n\treturn (\n\t\t<HashRouter basename=\"/\">\n\t\t\t<div className=\"App full-height\">\n\t\t\t\t<Switch>\n\t\t\t\t\t<Route path=\"/\" exact children={<Admin />} />\n\t\t\t\t\t<Route path=\"/admin\" children={<Admin />} />\n\t\t\t\t\t<Route path=\"/spotify-token/:token\" children={<SpotifyTokenHandler />} />\n\t\t\t\t\t<Route\n\t\t\t\t\t\tpath=\"/:callback\"\n\t\t\t\t\t\texact\n\t\t\t\t\t\tchildren={<Callback ACCESS_TOKEN={ACCESS_TOKEN} EXPIRES_IN={EXPIRES_IN} TOKEN_TYPE={TOKEN_TYPE} />}\n\t\t\t\t\t/>\n\t\t\t\t\t<Route path=\"/:server/:nickname/:token?\" children={<Out />} />\n\t\t\t\t</Switch>\n\t\t\t</div>\n\t\t</HashRouter>\n\t);\n};\n\nconst getHashValue = (key: string) => {\n\tconst matches = window.location.hash.match(new RegExp(key + '=([^&]*)'));\n\treturn matches ? matches[1] : null;\n};\n\nconst Out = () => {\n\tlet { server, nickname, token } = useParams();\n\tconst ref = useRef<HTMLDivElement>(null);\n\n\tconst [width, setWidth] = useState(0);\n\tuseEffect(() => {\n\t\tconst width = ref && ref.current && ref.current.offsetWidth ? ref.current.offsetWidth : 0;\n\t\tsetWidth(width);\n\t}, [ref]);\n\n\tsaveConfig({\n\t\t...loadConfig(),\n\t\tserver,\n\t\tnickname\n\t});\n\treturn (\n\t\t<div className=\"cover full-height\">\n\t\t\t<div className=\"top\">\n\t\t\t\t<div className=\"text\" ref={ref}>\n\t\t\t\t\t<span>\n\t\t\t\t\t\t{server} / {nickname}\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t\t<CurrentlyPlaying width={width} token={token} />\n\t\t\t</div>\n\n\t\t\t<div className=\"area\" />\n\t\t</div>\n\t);\n};\n\nconst SpotifyTokenHandler = () => {\n\tlet { token } = useParams();\n\tsaveConfig({\n\t\t...loadConfig(),\n\t\tspotifyToken: token || ''\n\t});\n\treturn <Redirect to=\"/admin\" />;\n};\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      (process as { env: { [key: string]: string } }).env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}