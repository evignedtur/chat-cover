(this["webpackJsonpchat-cover"]=this["webpackJsonpchat-cover"]||[]).push([[0],{48:function(e,t,r){e.exports=r(90)},53:function(e,t,r){},54:function(e,t,r){},73:function(e,t){},75:function(e,t){},90:function(e,t,r){"use strict";r.r(t);var a=r(0),n=r.n(a),c=r(41),l=r.n(c),o=(r(53),r(3)),i=r(2),u=(r(54),r(21)),m=r(8),s=r(42),f=r.n(s),p=r(43),y=r(47);function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}var g=function(){if(!localStorage.getItem("CONFIG")){localStorage.setItem("CONFIG",JSON.stringify({currentlyPlayingPrefix:"Currently playing",includeCurrentlyPlaying:!1,color1:"rgb(155,31,31)",color2:"rgb(194,76,76)",nickname:"Nickname",server:"Server"}))}return JSON.parse(localStorage.getItem("CONFIG"))},E=function(e){localStorage.setItem("CONFIG",JSON.stringify(e))},b=function(){var e="".concat(window.location.protocol+"//"+window.location.host+window.location.pathname,"#/callback");console.log(e);var t=Object(y.a)(),r=t.register,c=t.handleSubmit,l=Object(a.useState)(g()),u=Object(i.a)(l,2),m=u[0],s=u[1];return n.a.createElement("div",{className:"wrapper"},n.a.createElement("div",{className:"sidebar"},n.a.createElement("div",{className:"logo"}),n.a.createElement("div",{className:"sidebar-background"}),n.a.createElement("nav",null,!localStorage.getItem("ACCESS_TOKEN")&&n.a.createElement("a",{href:"".concat("https://accounts.spotify.com/authorize","?client_id=").concat("85595b738deb4f078eb60bf45c542d45","&redirect_uri=").concat(encodeURIComponent(e),"&scope=").concat(encodeURIComponent("user-read-currently-playing"),"&response_type=token"),className:" button spotify"},"Login med Spotify"),m&&m.server&&m.nickname&&n.a.createElement("a",{href:"#/".concat(m.server.toLowerCase(),"/").concat(m.nickname.toLowerCase()),className:"button"},"G\xe5 til overlay"))),n.a.createElement("div",{className:"container"},n.a.createElement("div",{className:"card"},n.a.createElement("div",{className:"card-header"},"Config"),n.a.createElement("div",{className:"card-content"},n.a.createElement("form",{onSubmit:c((function(e){var t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(r,!0).forEach((function(t){Object(o.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e,{includeCurrentlyPlaying:"true"===e.includeCurrentlyPlaying});s(t),E(t)}))},n.a.createElement("div",{className:"card-group"},n.a.createElement("div",{className:"formgroup"},n.a.createElement("label",{htmlFor:"server"},"Server"),n.a.createElement("input",{type:"text",defaultValue:m.server,name:"server",id:"server",ref:r})),n.a.createElement("div",{className:"formgroup"},n.a.createElement("label",{htmlFor:"nickname"},"Nickname"),n.a.createElement("input",{type:"text",defaultValue:m.nickname,name:"nickname",id:"nickname",ref:r}))),n.a.createElement("div",{className:"card-group"},n.a.createElement("div",{className:"formgroup"},n.a.createElement("label",{htmlFor:"includeCurrentlyPlaying"},'Include Spotify "Currently playing"-bar'),n.a.createElement("input",{type:"radio",defaultChecked:!g().includeCurrentlyPlaying,value:JSON.stringify(!g().includeCurrentlyPlaying),name:"includeCurrentlyPlaying",ref:r}),n.a.createElement("input",{type:"radio",defaultChecked:g().includeCurrentlyPlaying,value:JSON.stringify(g().includeCurrentlyPlaying),name:"includeCurrentlyPlaying",ref:r})),n.a.createElement("div",{className:"formgroup"},n.a.createElement("label",{htmlFor:"currentlyPlayingPrefix"},'Prefix text for Spotify "Currently playing"-bar'),n.a.createElement("input",{type:"text",defaultValue:m.currentlyPlayingPrefix,name:"currentlyPlayingPrefix",id:"currentlyPlayingPrefix",ref:r}))),n.a.createElement("div",{className:"card-group"},n.a.createElement("div",{className:"formgroup"},n.a.createElement("label",{htmlFor:"color1"},"Main color (in rgb)"),n.a.createElement("input",{type:"text",defaultValue:m.color1,name:"color1",id:"color1",ref:r})),n.a.createElement("div",{className:"formgroup"},n.a.createElement("label",{htmlFor:"color2"},"Secondary color (in rgb)"),n.a.createElement("input",{type:"text",defaultValue:m.color2,name:"color2",id:"color2",ref:r}))),n.a.createElement("button",{className:"green",type:"submit"},"Lagre"))))))},O=r(24);function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}var h=function(e,t){var r=Object(a.useRef)(e);Object(a.useEffect)((function(){r.current=e}),[e]),Object(a.useEffect)((function(){if(null!==t){var e=setInterval((function(){r.current()}),t);return function(){return clearInterval(e)}}}),[t])},P=function(){localStorage.removeItem("ACCESS_TOKEN"),localStorage.removeItem("EXPIRES_IN"),localStorage.removeItem("TOKEN_TYPE")},N=function(e){var t=Object(a.useState)(g().includeCurrentlyPlaying),r=Object(i.a)(t,2),c=r[0],l=r[1],u=g(),m=function(){var e=Object(a.useState)(),t=Object(i.a)(e,2),r=t[0],n=t[1];return h((function(){g().includeCurrentlyPlaying&&(l(!0),f.a.get("https://api.spotify.com/v1/me/player/currently-playing",{headers:{Authorization:"Bearer "+localStorage.getItem("ACCESS_TOKEN")}}).then((function(e){r?e.data.item&&r.item&&e.data.item.name!==r.item.name&&n(e.data):n(e.data)})).catch((function(e){alert(e),P(),E(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(r,!0).forEach((function(t){Object(o.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},g(),{includeCurrentlyPlaying:!1}))})))}),5e3),r}();return n.a.createElement(O.a,null,c&&m&&m.is_playing&&u.includeCurrentlyPlaying&&n.a.createElement(O.b.div,{initial:{translateY:"-100%"},animate:{translateY:"0%"},exit:{translateY:"-100%"},className:"currently-playing",style:{width:"calc((100% - ".concat(e.width,"px) - 100px)")}},n.a.createElement(p.a,null,m.is_playing&&m.item&&m.item.name&&m.item.artists&&"".concat(u.currentlyPlayingPrefix?u.currentlyPlayingPrefix+": ":""," ").concat(m.item.artists.map((function(e){return e.name})).join(", ")," - ").concat(m.item.name))))},S=b,j=function(e,t,r){e&&localStorage.setItem("ACCESS_TOKEN",e),t&&localStorage.setItem("EXPIRES_IN",t),r&&localStorage.setItem("TOKEN_TYPE",r)},w=function(e){return j(e.ACCESS_TOKEN,e.EXPIRES_IN,e.TOKEN_TYPE),n.a.createElement(m.a,{to:"/admin"})};function C(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}var I=function(e){var t=window.location.hash.match(new RegExp(e+"=([^&]*)"));return t?t[1]:null};function k(){var e=Object(m.g)(),t=e.server,r=e.nickname,c=Object(a.useRef)(null),l=Object(a.useState)(0),u=Object(i.a)(l,2),s=u[0],f=u[1];return Object(a.useEffect)((function(){var e=c&&c.current&&c.current.offsetWidth?c.current.offsetWidth:0;f(e)}),[c]),E(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?C(r,!0).forEach((function(t){Object(o.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):C(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},g(),{server:t,nickname:r})),n.a.createElement("div",{className:"cover full-height"},n.a.createElement("div",{className:"top"},n.a.createElement("div",{className:"text",ref:c},n.a.createElement("span",null,t," / ",r)),n.a.createElement(N,{width:s})),n.a.createElement("div",{className:"area"}))}var x=function(){var e=I("access_token"),t=I("expires_in"),r=I("token_type");return n.a.createElement(u.a,{basename:"/"},n.a.createElement("div",{className:"App full-height"},n.a.createElement(m.d,null,n.a.createElement(m.b,{path:"/",exact:!0,children:n.a.createElement(S,null)}),n.a.createElement(m.b,{path:"/admin",children:n.a.createElement(S,null)}),n.a.createElement(m.b,{path:"/:callback",exact:!0,children:n.a.createElement(w,{ACCESS_TOKEN:e,EXPIRES_IN:t,TOKEN_TYPE:r})}),n.a.createElement(m.b,{path:"/:server/:nickname",children:n.a.createElement(k,null)}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(n.a.createElement(x,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[48,1,2]]]);
//# sourceMappingURL=main.14a3a12f.chunk.js.map